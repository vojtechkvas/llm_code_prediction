[
    {
        "filename": "data/member/business/RoleService.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.business;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.AbstractService;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.exception.MyEntityNotFoundException;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.repository.IdJpaRepository;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Role;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.enums.RoleTypeEnum;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.repository.RoleRepository;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class RoleService extends AbstractService<Role> {\n    private final RoleRepository roleRepository;\n\n    public RoleService(RoleRepository roleRepository) {\n        this.roleRepository = roleRepository;\n    }\n\n    @Override\n    protected IdJpaRepository<R",
        "middle": "ole, Long> getRepository() {\n        return this.roleRepository;\n    }\n\n    public Role getByType(RoleTypeEnum type) {\n        return roleRepository.findByType(type).orElseThrow(\n       ",
        "suffix": "         () -> new MyEntityNotFoundException(type + \" does not exist in the database.\")\n        );\n    }\n\n\n}\n"
    },
    {
        "filename": "data/member/dto/MemberResponseDto.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.dto;\n\n\nimport com.fasterxml.jackson.annotation.JsonFormat;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.enums.PreferredLangEnum;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport lombok.Data;\n\nimport java.time.LocalDateTime;\n\n@Data\npublic class MemberResponseDto {\n\n    @Schema(example = \"111\")\n    private Long idMember;\n\n    @Schema(example = \"Naftenko\")",
        "middle": "\n    private String firstName;\n\n    @Sche",
        "suffix": "ma(example = \"Petrolijevic\")\n    private String middleName;\n\n    @Schema(example = \"Benzinov\")\n    private String lastName;\n\n    @Schema(example = \"true\")\n    private boolean identityCheck;\n\n    @Schema(example = \"{{$randomEmail}}\")\n    private String activeEmail;\n\n    @Schema(example = \"ENG\")\n    private PreferredLangEnum preferredLanguage;\n\n    @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n    @Schema(type = \"string\", example = \"2027-02-19T18:36:06\")\n    private LocalDateTime willBeDeleteAt;\n}\n"
    },
    {
        "filename": "data/member/repository/MemberRepository.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.repository;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.repository.IdJpaRepository;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Member;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.Optional;\n\n\n@Repository\npublic interface MemberRepository extends IdJpaRepository<Member, Long> {\n    @Query(\"SELECT e FROM Member e WHERE e.activeEmail = :email \" +\n            \"AND e.deletionRequestAt IS NULL \" +\n            \"AND e.deletionRequestComment IS NULL AND e.willBeDeleteAt IS NULL \")\n    Optional<Member> findValidMemberByActiveEmail(String email);\n\n\n    @Query(\"SELECT e FROM Member e WHERE  \" +\n            \" e.deletionRequestAt IS NOT NULL  \" +\n            \"AND e.willBeDeleteAt IS NOT NULL \" +\n            \"AND e.willBeDeleteAt < CURRENT_TIMESTAMP\")\n    Iterable<Member> findMembersToDelete();\n\n    boolean existsByActiveEmail(String email);\n\n    @Query(\"SELECT e FROM Member e WHERE  \" +\n            \" e.identityCheck = :isIdentityCheck \" +\n            \"AND e.deletionRequestAt IS NOT NULL  \" +\n           ",
        "middle": " \"AND e.willBeDeleteAt IS NOT NULL \"\n    )\n    Page<Member> findAllMembersIdentityCheckAndDeleted",
        "suffix": "(Pageable pageable, boolean isIdentityCheck);\n\n    @Query(\"SELECT e FROM Member e WHERE  \" +\n            \" e.identityCheck = :isIdentityCheck \" +\n            \"AND e.deletionRequestAt IS  NULL  \" +\n            \"AND e.willBeDeleteAt IS NULL \"\n    )\n    Page<Member> findAllMembersIdentityCheckAndNotDeleted(Pageable pageable, boolean isIdentityCheck);\n\n    Optional<Member> findByIdAndDeletionRequestAtIsNull(Long idMember);\n\n\n    @Query(\"SELECT e FROM Member e WHERE  \" +\n            \"e.idMember = :idMember \" +\n            \"AND e.identityCheck = true \" +\n            \"AND e.deletionRequestAt IS NULL  \" +\n            \"AND e.deletionRequestComment IS NULL \" +\n            \"AND e.willBeDeleteAt IS NULL \"\n    )\n    Optional<Member> findValidAndCheckMemberById(Long idMember);\n\n\n    Optional<Member> findByActiveEmailAndDeletionRequestAtIsNull(String email);\n}\n"
    },
    {
        "filename": "data/member/repository/RoleAssignmentRepository.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.repository;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.repository.MemberRecordJpaRepository;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.RoleAssignment;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.enums.BlockAccessTypeEnum;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.enums.RoleTypeEnum;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\n\n\n@Repository\npublic interface RoleAssignmentRepository extends MemberRecordJpaRepository<RoleAssignment, Long> {\n\n    boolean existsByMemberIdAndRoleIdAndDeletedAtIsNull(Long idMember, Long roleId);\n\n    @Query(\"SELECT r.type   FROM Role r \" +\n            \"JOIN RoleAssignment ra ON ra.role = r \" +\n            \"JOIN Member m ON ra.member.idMember = m.idMember \" +\n            \"LEFT JOIN Membership ms ON ms.member.idMember = m.idMember \" +\n            \"LEFT JOIN Semester sem ON ms.semester.idSemester = sem.idSemester \" +\n            \"LEFT JOIN MembershipType mt ON ms.membershipType.idMembershipType = mt.idMembershipType  \" +\n            \"LEFT JOIN PaymentMembershipForgiveness pf ON pf.membership.idMembership = ms.idMembership \" +\n            \"LEFT JOIN PaymentMapping pm ON ms.paymentMapping.idPaymentMapping = pm.idPaymentMapping",
        "middle": " \" +\n            \"LEFT JOIN BlockAccess ba ON ba.member.idMember = m.idMember \" +\n\n\n            \"WHERE \" +\n\n\n            \"   ( ms IS NOT NULL AND mt IS NOT NULL AN",
        "suffix": "D m.identityCheck = true AND  \" +\n\n            \"  sem.startOfSemester < CURRENT_TIMESTAMP \" +\n            \"  AND CURRENT_TIMESTAMP < sem.endOfSemester \" +\n\n            \"  AND \" +\n            \"   (( \" +\n            \"    pm IS  NULL \" +\n            \"    AND pf IS NOT NULL \" +\n            \"    AND pf.deletedAt IS NULL \" +\n\n            \"    ) OR (\" +\n            \"    pf IS  NULL \" +\n            \"    AND pm  IS NOT NULL \" +\n            \"    AND pm.deletedAt IS NULL \" +\n            \"))) \" +\n\n\n            // access is NOT blocked\n            \" AND ( ba IS  NULL OR \" +\n            \"   (NOT( ba.blockAccessType = :blockAccessTypeEnumNetwork \" +\n            \"       AND CURRENT_TIMESTAMP < ba.blockedEnd AND ba.deletedAt IS NULL )\" +\n            \"   AND  \" +\n            \"   NOT( ba.blockAccessType = :blockAccessTypeEnumGym  \" +\n            \"       AND CURRENT_TIMESTAMP < ba.blockedEnd AND ba.deletedAt IS NULL )\" +\n            \"  )\" +\n            \")  \" +\n\n            \"AND m.activeEmail = :username \" +\n            \"AND ra.deletedAt IS NULL \" +\n            \"AND m.deletionRequestAt IS NULL AND m.willBeDeleteAt IS NULL  \"\n\n    )\n    List<RoleTypeEnum> findValidRolesForMemberByActiveEmail(@Param(\"username\") String username,\n                                                            @Param(\"blockAccessTypeEnumNetwork\") BlockAccessTypeEnum blockAccessTypeEnumNetwork,\n                                                            @Param(\"blockAccessTypeEnumGym\") BlockAccessTypeEnum blockAccessTypeEnumGym);\n\n\n}\n"
    },
    {
        "filename": "data/member/domain/Room.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.domain;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.domain.Identifiable;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.enums.DormitoryEnum;\nimport jakarta.persistence.*;\nimport lombok.Data;\n\n@Data\n@Entity\n@Table(name = \"room\", uniqueConstraints = {\n        @UniqueConstraint(name = \"room_dormitory_roomNumber\", columnNames = {\"dormitory\", \"roomNumber\"})\n})\npublic class Room implements Identifiable {\n\n    @Id\n    @Column(name = \"id_room\")\n    @GeneratedVa",
        "middle": "lue(strategy = GenerationType.SEQUENCE)\n    private Long idRoom;\n\n    @Column(name = \"dormitory\", nullable = false, length = 256)\n    @Enumerated(EnumType.STRING)\n    private ",
        "suffix": "DormitoryEnum dormitory;\n\n    @Column(name = \"roomNumber\", nullable = false, length = 256)\n    private String roomNumber;\n\n    public Room(DormitoryEnum dormitory, String roomNumber) {\n        this.dormitory = dormitory;\n        this.roomNumber = roomNumber;\n    }\n\n    public Room() {\n\n    }\n\n    @Override\n    public Long getId() {\n        return this.idRoom;\n    }\n}\n"
    },
    {
        "filename": "data/member/dto/UniversityCreateDto.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.dto;\n\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.Size;\nimport lombok.Data;\n\n@Data\npublic class UniversityCreateDto {\n\n\n    @Schema(example = \"CVUT {{countryShort3Chars}}\")\n    @NotBlank(message = \"name cannot be blank\")\n    @Size(max = 256",
        "middle": ", message = \"'${validatedValue}' cannot exceed {max} characters.\")\n    private String name;\n\n\n    @Schema(example = \"CVUT {{countryShort3Chars}}\")\n    @NotBlank(message = \"nameEn english cannot be",
        "suffix": " blank\")\n    @Size(max = 256, message = \"'${validatedValue}' cannot exceed {max} characters.\")\n    private String nameEn;\n}\n"
    },
    {
        "filename": "data/member/repository/MemberEntityListener.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.repository;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.domain.RecordableDeleteEntity;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.domain.RecordableEntity;\nimport cz.cvut.fit.kvasvojt.sinis.modules.election.domain.Candidate;\nimport cz.cvut.fit.kvasvojt.sinis.modules.election.domain.Commissar;\nimport cz.cvut.fit.kvasvojt.sinis.modules.election.domain.Vote;\nimport cz.cvut.fit.kvasvojt.sinis.modules.fitness.domain.FitnessCard;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Member;\nimport cz.cvut.fit.kvasvojt.sinis.modules.payment.domain.Membership;\nimport cz.cvut.fit.kvasvojt.sinis.modules.printer.domain.Transaction;\nimport cz.cvut.fit.kvasvojt.sinis.modules.stuff.domain.StuffAs",
        "middle": "signment;\nimport jakarta.persistence.PreRemove;\nimport org",
        "suffix": ".springframework.stereotype.Component;\nimport org.springframework.transaction.annotation.Transactional;\n\n@Component\npublic class MemberEntityListener {\n\n\n    @PreRemove\n    @Transactional\n    public void preRemove(Member member) {\n\n\n        Iterable<FitnessCard> fitnessCards = member.getFitnessCards();\n\n        fitnessCards.forEach(fitnessCard -> {\n            fitnessCard.setMember(null);\n            if (!fitnessCard.isDeleted()) {\n\n                fitnessCard.delete(member.getDeletionRequestBy(), \"Card delete, because of member deletion.\");\n            }\n\n        });\n\n\n        Iterable<StuffAssignment> stuffAssignments = member.getStuffAssignments();\n\n        stuffAssignments.forEach(stuffAssignment -> stuffAssignment.setMember(null));\n\n        Iterable<Transaction> transactions = member.getTransactions();\n\n        transactions.forEach(transaction -> transaction.setMember(null));\n\n        Iterable<Membership> memberships = member.getMemberships();\n\n        memberships.forEach(transaction -> transaction.setMember(null));\n\n        Iterable<Vote> votes = member.getVotes();\n        votes.forEach(vote -> vote.setMember(null));\n\n        Iterable<Candidate> candidates = member.getCandidates();\n        candidates.forEach(candidate -> candidate.setMember(null));\n\n        Iterable<Commissar> commissars = member.getCommissars();\n        commissars.forEach(candidate -> candidate.setMember(null));\n\n\n        setCreatedByToNull(member.getElectionsCreatedBy());\n        setCreatedByToNull(member.getCommissarsCreated());\n        setCreatedByToNull(member.getOfflineVotesCreated());\n        setCreatedByToNull(member.getCandidatesCreated());\n        setCreatedByToNull(member.getBlockDevicesCreated());\n        setCreatedByToNull(member.getSwitchesCreated());\n        setCreatedByToNull(member.getPortsCreated());\n        setCreatedByToNull(member.getSocketsCreated());\n        setCreatedByToNull(member.getDeviceCreated());\n        setCreatedByToNull(member.getResourceCreated());\n        setCreatedByToNull(member.getTransactionsCreated());\n        setCreatedByToNull(member.getPaymentAbstractsCreated());\n        setCreatedByToNull(member.getPaymentMappingsCreated());\n        setCreatedByToNull(member.getPaymentMembershipForgivenessesCreated());\n        setCreatedByToNull(member.getRoleAssignmentsCreated());\n        setCreatedByToNull(member.getRoomAccommodationsCreated());\n        setCreatedByToNull(member.getAddressesCreated());\n        setCreatedByToNull(member.getBlockMembershipsCreated());\n        setCreatedByToNull(member.getAssociateFacultiesCreated());\n        setCreatedByToNull(member.getEmailSinisAliasesCreated());\n        setCreatedByToNull(member.getFitnessCardsCreated());\n        setCreatedByToNull(member.getStuffAssignmentsCreated());\n\n\n        setDeletedByToNull(member.getElectionsDeletedBy());\n        setDeletedByToNull(member.getCommissarsDeletedBy());\n        setDeletedByToNull(member.getOfflineVotesDeletedBy());\n        setDeletedByToNull(member.getCandidatesDeletedBy());\n        setDeletedByToNull(member.getBlockDevicesDeletedBy());\n        setDeletedByToNull(member.getSwitchesDeletedBy());\n        setDeletedByToNull(member.getPortsDeletedBy());\n        setDeletedByToNull(member.getSocketsDeletedBy());\n        setDeletedByToNull(member.getDeviceDeletedBy());\n        setDeletedByToNull(member.getResourceDeletedBy());\n        setDeletedByToNull(member.getTransactionsDeletedBy());\n        setDeletedByToNull(member.getPaymentAbstractsDeletedBy());\n        setDeletedByToNull(member.getPaymentMappingsDeletedBy());\n        setDeletedByToNull(member.getPaymentMembershipForgivenessesDeletedBy());\n        setDeletedByToNull(member.getRoleAssignmentsDeletedBy());\n        setDeletedByToNull(member.getRoomAccommodationsDeletedBy());\n        setDeletedByToNull(member.getAddressesDeletedBy());\n        setDeletedByToNull(member.getBlockMembershipsDeletedBy());\n        setDeletedByToNull(member.getAssociateFacultiesDeletedBy());\n        setDeletedByToNull(member.getEmailSinisAliasDeletedBy());\n        setDeletedByToNull(member.getFitnessCardsDeletedBy());\n        setDeletedByToNull(member.getStuffAssignmentsDeletedBy());\n\n\n        setCreatedByToNull(member.getVoteOnlyCreatedBy());\n        setCreatedByToNull(member.getSessionOnlyCreatedBy());\n        setCreatedByToNull(member.getGymAccessLogOnlyCreatedBy());\n\n        member.getMembersIdentityCheck().forEach(m -> m.setIdentityCheckBy(null));\n        member.getMembersDeletionRequest().forEach(m -> m.setDeletionRequestBy(null));\n        member.getMembersUpdatedBy().forEach(s -> s.setUpdatedBy(null));\n    }\n\n    private void setCreatedByToNull(Iterable<? extends RecordableEntity> list) {\n        list.forEach(created -> created.setCreatedBy(null));\n    }\n\n    private void setDeletedByToNull(Iterable<? extends RecordableDeleteEntity> list) {\n        list.forEach(deleted -> deleted.setDeletedBy(null));\n    }\n}\n"
    },
    {
        "filename": "data/member/dto/BlockAccessResponseDto.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.dto;\n\nimport com.fasterxml.jackson.annotation.JsonFormat;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.dto.RecordableDeleteEntityAndMemberResponseDto;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.enums.BlockAccessTypeEnum;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.time.LocalDateTime;\n\n@EqualsAndHashCode(callSuper = true)\n@Data\npublic class BlockAccessResponseDto extends RecordableDeleteEntityAndMemberResponseDto {\n\n    @Schema(example = \"1\")\n    private Long idBlockAccess;\n\n    @Schema(example = \"NETWORK_ACCESS\")\n    private BlockAccessTypeEnum blockAccessType;\n\n    @Sche",
        "middle": "ma(examp",
        "suffix": "le = \"You complain too much.\")\n    private String messageForBlockMember;\n\n    @Schema(type = \"string\", example = \"2026-08-15T18:36:06\")\n    @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n    private LocalDateTime blockedEnd;\n}\n"
    },
    {
        "filename": "data/member/business/UniversityService.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.business;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.AbstractService;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.exception.AttributeOfEntityTakenException;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.repository.IdJpaRepository;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.University;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.repository.UniversityRepository;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class UniversityService extends AbstractService<University> {\n    private final UniversityRepository universityRepository;\n\n    public UniversityService(UniversityRepository universityRepository) {\n        this.universityRepository = universityRepository;\n    }\n\n    @Override\n    protected IdJpaRepository<University, Long> getRepository() {\n        return this.universityRepository;\n    }\n\n\n    @Override\n    public University create(University university) {\n\n        if (universityRepository.existsByNameEn(university.getNameEn())) {\n            throw new AttributeOfEntityTakenException",
        "middle": "(\"NameEn already exist with this universityEn attribute.\");\n        }\n\n        i",
        "suffix": "f (universityRepository.existsByName(university.getName())) {\n            throw new AttributeOfEntityTakenException(\"Name already exist with this university attribute.\");\n        }\n\n        return super.create(university);\n    }\n\n}\n"
    },
    {
        "filename": "data/member/domain/Language.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.domain;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.domain.RecordableMember;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.enums.PreferredLangEnum;\nimport jakarta.persistence.*;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.io.Serializable;\n\n@EqualsAndHashCode(callSuper = true)\n@Data\n@Entity\n@Table(name = \"language\")\npublic class Language extends RecordableMember implements Serializable {\n\n    private static final",
        "middle": " long serialVersionUID = 2L;\n\n    @Id\n    @GeneratedValue(strategy =",
        "suffix": " GenerationType.SEQUENCE)\n    @Column(name = \"id_language\")\n    private Long idLanguage;\n\n    @Column(name = \"preferred_language\", nullable = false, length = 256)\n    @Enumerated(EnumType.STRING)\n    private PreferredLangEnum preferredLanguage = PreferredLangEnum.CZ;\n\n    @Override\n    public Long getId() {\n        return this.idLanguage;\n    }\n\n}\n"
    },
    {
        "filename": "data/member/controller/RoomController.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.controller;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.controller.AbstractModelMapperController;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.business.RoomService;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Room;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.dto.RoomResponseDto;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.ann",
        "middle": "otations.tags.Tag;\nimport org.modelmapper.ModelMapper;",
        "suffix": "\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.ResponseStatus;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.Collection;\n\n@Tag(name = \"Member\")\n@RestController\npublic class RoomController extends AbstractModelMapperController<Room, RoomResponseDto, RoomResponseDto> {\n\n    private final RoomService roomService;\n\n    RoomController(RoomService roomService, ModelMapper modelMapper) {\n        super(modelMapper);\n        this.roomService = roomService;\n    }\n\n    @Operation(\n            summary = \"Get all rooms\",\n            description = \"This endpoint return all rooms, which can be possibly link to member.\"\n    )\n    @ResponseStatus(HttpStatus.OK)\n    @GetMapping(\"/rooms\")\n    public Collection<RoomResponseDto> getAll() {\n        return convertManyToDTO(roomService.getAll());\n    }\n\n    @Override\n    protected Class<Room> getEntityClass() {\n        return Room.class;\n    }\n\n    @Override\n    protected Class<RoomResponseDto> getDtoClass() {\n        return RoomResponseDto.class;\n    }\n}\n"
    },
    {
        "filename": "data/member/domain/BlockAccess.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.domain;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.domain.RecordableMember;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.enums.BlockAccessTypeEnum;\nimport jakarta.persistence.*;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\nimport java.time.LocalDateTime;\n\n@EqualsAndHashCode(callSuper = true)\n@Data\n@Entity\n@Table(name = \"block_access\")\npublic class BlockAccess extends RecordableMember {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    @Column(name = \"id_block_access\")\n    private Long idBlockAccess;\n\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = \"blocked_end\", nullable = false)\n    private LocalDateTime blockedEnd;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = \"block_access_type\", nullable = false)\n    private BlockAccessTypeEnum blockAccessType;\n\n    @C",
        "middle": "olumn(name = \"message_for_block_member\", nullable = false, length = 100)\n    private String messageForBlockMember;\n\n    public BlockAccess() {\n        super();\n    }\n\n    @Override\n  ",
        "suffix": "  public Long getId() {\n        return idBlockAccess;\n    }\n}\n"
    },
    {
        "filename": "data/member/controller/RoleAssignmentController.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.controller;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.AbstractMemberService;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.controller.AbstractMemberController;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.dto.RecordableDeleteEntityCreateDto;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.business.MemberService;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.business.RoleAssignmentService;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.business.RoleService;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Member;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Role;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.RoleAssignment;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.dto.RoleAssignmentCreateDto;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.dto.RoleAssignmentResponseDto;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.media.Content;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport io.swagger.v3.oas.annotations.responses.ApiResponse;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport org.modelmapper.ModelMapper;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.domain.Sort;\nimport org.springframework.data.web.PageableDefault;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.access.prepost.PreAuthorize;\nimport org.springframework.security.core.annotation.AuthenticationPrincipal;\nimport org.springframework.validation.annotation.Validated;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.Map;\n\n@Tag(name = \"Member\")\n@RestController\npublic class RoleAssignmentController extends AbstractMemberController<RoleAssignment, RoleAssignmentResponseDto, RoleAssignmentCreateDto> {\n\n    private final RoleAssignmentService roleAssignmentService;\n    private final RoleService roleService;\n\n    RoleAssignmentController(RoleAssignmentService roleAssignmentService, MemberService memberService, ModelMapper modelMapper, RoleService roleService) {\n        super(modelMapper, memberService);\n        this.roleAssignmentService = roleAssignmentService;\n        this.roleService = roleService;\n    }\n\n    @Operation(\n            summary = \"Get all role assignment related to member\",\n            description = \"This endpoint return role assignments related to member. Endpoint can filter out deleted role assignments.\"\n    )\n    @Override\n    @ResponseStatus(HttpStatus.OK)\n    @GetMapping(\"/members/{idMember}/role-assignments\")\n    @PreAuthorize(\"@memberAuthorization.isRegistrarOfRoleOrOwner(authentication, #idMember)\")\n    public ResponseEntity<Page<RoleAssignmentResponseDto>",
        "middle": "> getAllByMemberId(\n            @PathVariable Long idM",
        "suffix": "ember,\n            @RequestParam(required = false, defaultValue = \"true\") boolean isNotDeleted,\n            @RequestParam Map<String, String> filterParams,\n\n            @PageableDefault(page = 0, size = 20, sort = \"createdAt\", direction = Sort.Direction.DESC)\n            Pageable pageable\n    ) {\n        return super.getAllByMemberId(idMember, isNotDeleted, filterParams, pageable);\n    }\n\n    @Operation(\n            summary = \"Create role assignment\",\n            description = \"Create role assignment and link it to member.\"\n    )\n    @ApiResponse(responseCode = \"409\", content = @Content(schema = @Schema(example = \"{\\n    \\\"message\\\": \\\"Member already owns this role.\\\"\\n}\")))\n    @ApiResponse(responseCode = \"404\", content = @Content(schema = @Schema(example = \"{\\\"message\\\": \\\"Entity with id = 1 not found.\\\"}\")))\n    @ResponseStatus(HttpStatus.CREATED)\n    @PostMapping(\"/role-assignments\")\n    @PreAuthorize(\"@memberAuthorization.isRegistrarOfRole(authentication, #roleAssignmentCreateDto.getRole())\")\n    public ResponseEntity<RoleAssignmentResponseDto> create(@RequestBody @Validated RoleAssignmentCreateDto roleAssignmentCreateDto, @AuthenticationPrincipal Member loginMember) {\n\n        RoleAssignment newRoleAssignment = convertToEntity(roleAssignmentCreateDto, loginMember);\n        newRoleAssignment = this.roleAssignmentService.create(newRoleAssignment);\n\n        return new ResponseEntity<>(convertToDto(newRoleAssignment), HttpStatus.CREATED);\n\n    }\n\n    @Operation(\n            summary = \"Delete role assignment\",\n            description = \"This endpoint will soft delete role assignment. In another words it will fill attributes related to deletion.\"\n    )\n    @Override\n    @ResponseStatus(HttpStatus.OK)\n    @PatchMapping(\"/role-assignments/{idRoleAssignment}\")\n    @PreAuthorize(\"@memberAuthorization.isRegistrarOfRoleOrOwner(authentication, @roleAssignmentService.getEntityById(#idRoleAssignment).getMember().getIdMember() )\")\n    public ResponseEntity<RoleAssignmentResponseDto> deletion(@Validated @RequestBody RecordableDeleteEntityCreateDto recordableDeleteEntityCreateDto,\n                                                              @Parameter(description = \"The id of the role assignment to delete\", example = \"{{idRoleAssignment}}\", required = true) @PathVariable Long idRoleAssignment,\n                                                              @AuthenticationPrincipal Member loginMember) {\n        return super.deletion(recordableDeleteEntityCreateDto, idRoleAssignment, loginMember);\n    }\n\n    @Override\n    protected RoleAssignment convertToEntity(RoleAssignmentCreateDto roleAssignmentCreateDto, Member loginMember) {\n\n        Role role = this.roleService.getByType(roleAssignmentCreateDto.getRole());\n\n        RoleAssignment newRoleAssignment = super.convertToEntity(roleAssignmentCreateDto, loginMember);\n        newRoleAssignment.setRole(role);\n\n        return newRoleAssignment;\n    }\n\n    @Override\n    protected AbstractMemberService<RoleAssignment> getService() {\n        return roleAssignmentService;\n    }\n\n    @Override\n    protected Class<RoleAssignment> getEntityClass() {\n        return RoleAssignment.class;\n    }\n\n    @Override\n    protected Class<RoleAssignmentResponseDto> getDtoClass() {\n        return RoleAssignmentResponseDto.class;\n    }\n}\n"
    },
    {
        "filename": "data/member/dto/FacultyCreateDto.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.dto;\n\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Positive;\nimport jakarta.validation.constraints.Size;\nimport lombok.Data;\n\n@Data\npublic class FacultyCreateDto {\n\n    @Schema(example = \"1\")\n    @Positive(message = \"idUniversity must be a positive integer.\")\n    @NotNull(message = \"idUniversity cannot be blank.\")\n    private Long idUniversity;\n\n    @Schema(example = \"FIT {{randomChars}}\")\n    @NotBlank(message = \"name cannot be blank\")\n    @Size(max = 60, message = \"nameEn must be at most 60 characters long\")\n    @Size(max = 256, message = \"'${validatedValue}' cannot exceed {max} characters.\")\n    private String n",
        "middle": "ame;\n\n    @Schema(example = \"FIT {{randomChars}}\")\n    @NotBlank(message = \"nameEn english cannot be ",
        "suffix": "blank\")\n    @Size(max = 60, message = \"nameEn must be at most 60 characters long\")\n    @Size(max = 256, message = \"'${validatedValue}' cannot exceed {max} characters.\")\n    private String nameEn;\n\n\n}\n"
    },
    {
        "filename": "data/member/business/RoleAssignmentService.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.business;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.AbstractMemberService;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.exception.EntityAlreadyAssignedException;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.repository.MemberRecordJpaRepository;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.RoleAssignment;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.enums.BlockAccessTypeEnum;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.enums.RoleTypeEnum;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.repository.RoleAssignmentRepository;\nimport org.springframework.stereotype.Service;\n\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n@Service\npublic class RoleAssignmentService extends AbstractMemberService<RoleAssignment> {\n    private final RoleAssignmentRepository roleAssignmentRepository;\n\n    public RoleAssignmentService(RoleAssignmentRepository roleAssignmentRepository) {\n        this.roleAssignmentRepository = roleAssignmentRepository;\n\n    }\n\n    @Override\n    protected MemberRecordJpaRepository<RoleAssignment, Long> getRepository() {\n        return this.roleAssignmentRepository;\n    }\n\n    @Override\n    public RoleAssignment create(RoleAssignment e) {\n\n        if (this.roleAssignmentRepository.existsByMemberIdAndRoleIdAndDeletedAtIsNull(e.getMember().getId(), e.getRole().getId())) {\n            throw new EntityAlreadyAssignedException(\"Member already owns this role.\");\n        }\n\n        return super.create(e);\n    }\n\n\n    public List<RoleTypeEnum> getValidRolesForMemberByActiveEmail(String username) {\n\n\n        List<RoleTypeEnum> roles = roleAssignmentRepository.findValidRolesForMemberByActiveEmail(username,\n                BlockAccessTypeEnum.NETWORK_ACCESS,\n                BlockAccessTypeEnum.GYM_ACCESS);\n\n\n        if (roles.stream().anyMatch(role -> role.equals(RoleTypeEnum.ROLE_GOD_ADMIN))) {\n            roles.addAll(Arrays.stream(RoleTypeEnum.values())\n                    .collect(Collectors.toSet()));\n        }\n\n        if (roles.stream().anyMatch(role -> role.equals(RoleTypeEnum.ROLE_H",
        "middle": "EAD_OF_NET_ADMINS))) {\n            r",
        "suffix": "oles.add((RoleTypeEnum.ROLE_NET_ADMIN));\n        }\n\n        if (roles.stream().anyMatch(role -> role.equals(RoleTypeEnum.ROLE_HEAD_OF_GYM_ADMINS))) {\n            roles.add((RoleTypeEnum.ROLE_GYM_ADMIN));\n        }\n\n        if (roles.stream().anyMatch(role -> role.equals(RoleTypeEnum.ROLE_NET_ADMIN))) {\n            roles.add((RoleTypeEnum.ROLE_REGISTRAR));\n        }\n\n\n        return roles;\n\n    }\n\n\n}\n"
    },
    {
        "filename": "data/member/business/CountryService.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.business;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.AbstractService;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.exception.AttributeOfEntityTakenException;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.exception.MyEntityNotFoundException;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.repository.IdJpaRepository;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Country;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.repository.CountryRepository;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class CountryService extends AbstractService<Country> {\n    private final CountryRepository countryRepository;\n\n    public CountryService(CountryRepository countryRepository) {\n        this.countryRepository = country",
        "middle": "Repository;\n    }\n\n    @Override\n  ",
        "suffix": "  protected IdJpaRepository<Country, Long> getRepository() {\n        return this.countryRepository;\n    }\n\n    public Country getByCountryShort(String shortName) {\n        return countryRepository.findByCountryShort(shortName)\n                .orElseThrow(() -> new MyEntityNotFoundException(\"Short country not found: \" + shortName));\n    }\n\n    public Iterable<Country> getAllSorted() {\n        return countryRepository.findAllSorted();\n    }\n\n    @Override\n    public Country create(Country country) {\n\n        if (countryRepository.existsByCountryShort(country.getCountryShort())) {\n            throw new AttributeOfEntityTakenException(\"Country already exist with this country_short attribute.\");\n        }\n\n        if (countryRepository.existsByCountryLong(country.getCountryLong())) {\n            throw new AttributeOfEntityTakenException(\"Country already exist with this country_long attribute.\");\n        }\n\n        return super.create(country);\n    }\n}\n"
    },
    {
        "filename": "data/member/business/MemberCleanupScheduler.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.business;\n\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Member;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.repository.MemberRepository;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.scheduling.annotation.EnableScheduling;\nimport org.springframework.scheduling.annotation.Scheduled;\nimport org.springframework.stereotype.Component;\n\n@Component\n@EnableScheduling\npublic class MemberCleanupScheduler {\n    private static final Logger logger = LoggerF",
        "middle": "actory.getLogger(MemberCleanupScheduler.class);\n    private final MemberService memberService;\n    private final MemberRepository memberRepository;\n\n    public MemberCleanupScheduler(MemberS",
        "suffix": "ervice memberService, MemberRepository memberRepository) {\n        this.memberService = memberService;\n        this.memberRepository = memberRepository;\n    }\n\n    @Scheduled(cron = \"0 0 0 * * *\")\n    public void processDeleteRequests() {\n\n        logger.info(\"Member cleanup\");\n\n        Iterable<Member> membersToDelete = memberService.getMembersToDelete();\n\n        memberRepository.deleteAll(membersToDelete);\n    }\n}\n"
    },
    {
        "filename": "data/member/domain/Country.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.domain;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.domain.Identifiable;\nimport jakarta.persistence.*;\nimport lombok.Data;\n\nimport java.io.Serial;\nimport java.io.Serializable;\n\n@Data\n@Entity\n@Table(name = \"country\", uniqueConstraints =\n        {\n                @UniqueConstraint(name = \"unique_constraint_country_short\", columnNames = \"country_short\"),\n                @UniqueConstraint(name = \"unique_constraint_country_long\", columnNames = \"country_long\")\n        })\npublic class Country implements Identifiable, Serializable {\n\n    @Serial\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    @Column(name = \"id_country\")\n    private Long idCountry;\n\n    @Column(name = \"country_short\", nullable = false, le",
        "middle": "ngth = 3)\n    private String countryShort;\n\n    @Column(name = \"country_long\", nullable = false, length = 35)\n    private String countryLong;\n\n    @Column(name = \"priority\", nullable = false,",
        "suffix": " columnDefinition = \"int default 100\")\n    private int priority = 100;\n\n    public Country(String countryShort, String countryLong, int priority) {\n        this.countryShort = countryShort;\n        this.countryLong = countryLong;\n        this.priority = priority;\n    }\n\n    public Country(String countryShort, String countryLong) {\n        this.countryShort = countryShort;\n        this.countryLong = countryLong;\n    }\n\n    public Country() {\n    }\n\n\n    @Override\n    public Long getId() {\n        return this.idCountry;\n    }\n\n}\n"
    },
    {
        "filename": "data/member/dto/RoomAccommodationCreateDto.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.dto;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.dto.MemberCreateDto;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Positive;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\n@EqualsAndHashCode(callSuper = true)\n@Data\npub",
        "middle": "lic class RoomAccommodationCreateDto extends MemberCreateDto {\n\n\n    @Schema(example = \"5\")\n    @Positive(mes",
        "suffix": "sage = \"idRoom must be a positive integer.\")\n    @NotNull(message = \"idRoom cannot be blank.\")\n    private Long idRoom;\n}\n"
    },
    {
        "filename": "data/member/controller/AuthController.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.controller;\n\n\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.dto.AuthResponseDto;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.dto.LoginDto;\nimport cz.cvut.fit.kvasvojt.sinis.security.CustomUserDetailsService;\nimport cz.cvut.fit.kvasvojt.sinis.security.JWTGenerator;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.validation.annotation.Validated;\nimport org.springframework.web.bind.annotation.*;\n\n@RequestMapping(produces = MediaType.APPLICATION_JSON_VALUE)\n@Tag(name = \"Member\")\n@RestController\npublic class AuthController {\n\n    private final AuthenticationManager authenticationManager;\n\n    private final JWTGenerator jwtGenerator;\n    private final CustomUserDetailsService customUserDetailsService;\n\n    @Autowired\n    public AuthController(AuthenticationManager authenticationManager, JWTGenerator jwtGenerator, CustomUserDetailsService customUserDetailsService) {\n        this.authenticationManager = authenticationManager;\n        this.jwtGenerator = jwtGenerator;\n        this.customUserDetailsService = customUserDetailsService;\n    }\n\n    @Operation(\n            summary = \"Login member\",\n            description = \"This endpoint login existing member.\",\n            operationId = \"login\"\n    )\n    @ResponseStatus(HttpStatus.OK)\n    @PostMapping(\"/login\")\n    public ResponseEntity<AuthResponseDto> login(@Validated @RequestBody LoginDto loginDto) {\n        Authentication authentication = authenticationManager.authenticate(\n                new UsernamePasswordAuthenticationToken(\n                     ",
        "middle": "   loginDto.getUsername(),\n                        loginDto.getPassword()));\n        SecurityContextHolder.getContext().setAuthentication(authenticat",
        "suffix": "ion);\n\n\n        String token = jwtGenerator.generateToken(authentication, customUserDetailsService);\n        return new ResponseEntity<>(new AuthResponseDto(token), HttpStatus.OK);\n    }\n\n}\n"
    },
    {
        "filename": "data/member/business/MemberService.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.business;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.AbstractService;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.exception.AttributeOfEntityTakenException;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.exception.EntityAlreadyDeletedException;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.exception.MyEntityNotFoundException;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.repository.IdJpaRepository;\nimport cz.cvut.fit.kvasvojt.sinis.modules.email_sinis_alias.business.EmailSinisAliasService;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.business.exception.MemberCannotCheckIdentityException;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Address;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Member;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.RoomAccommodation;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.repository.MemberRepository;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.util.Optional;\n\n@Service\npublic class MemberService extends AbstractService<Member> {\n\n    private final MemberRepository memberRepository;\n    private final EmailSinisAliasService emailSinisAliasService;\n    private final LanguageService languageService;\n    private final AddressService addressService;\n    private final RoomAccommodationService roomAccommodationService;\n\n    private final PasswordEncoder passwordEncoder;\n\n    public MemberService(MemberRepository memberRepository, EmailSinisAliasService emailSinisAliasService, LanguageService languageService, AddressService addressService, RoomAccommodationService roomAccommodationService, PasswordEncoder passwordEncoder) {\n        this.memberRepository = memberRepository;\n        this.emailSinisAliasService = emailSinisAliasService;\n        this.languageService = languageService;\n        this.addressService = addressService;\n        this.roomAccommodationService = roomAccommodationService;\n        this.passwordEncoder = passwordEncoder;\n    }\n\n\n    public boolean existsByActiveEmail(String email) {\n        return this.memberRepository.existsByActiveEmail(email);\n    }\n\n    public Optional<Member> getByActiveEmail(String email) {\n        return this.memberRepository.findValidMemberByActiveEmail(email);\n    }\n\n    @Override\n    protected IdJpaRepository<Member, Long> getRepository() {\n        return this.memberRepository;\n    }\n\n\n    public Page<Member> getAllMembersIdentityCheckAndDeletionCheck(Pageable pageable, boolean isIdentityCheck, boolean isDeletionRequested) {\n        if (isDeletionRequested) {\n            return memberRepository.findAllMembersIdentityCheckAndDeleted(pageable, isIdentityCheck);\n        } else {\n            return memberRepository.findAllMembersIdentityCheckAndNotDeleted(pageable, isIdentityCheck);\n\n        }\n    }\n\n    public Member deleteRequest(Member login, String comment, Member member) {\n\n        if (member.isDeleted()) {\n            throw new EntityAlreadyDeletedException();\n        }\n\n        LocalDateTime currentDate = LocalDate.now().atStartOfDay();\n        LocalDateTime willBeDeleteAt = currentDate.plusYears(1).withMonth(10).withDayOfMonth(1);\n\n        member.deleteRequest(login, comment, willBeDeleteA",
        "middle": "t);\n        member = memberRepository.save(member);\n\n        return member;\n    }\n\n    publi",
        "suffix": "c Member changePassword(String oldPassword, String newPassword, Member updateMember) {\n\n        if (oldPassword != null && !passwordEncoder.matches(oldPassword, updateMember.getPassword())) {\n            throw new IllegalArgumentException(\"Old password is incorrect.\");\n        }\n\n        newPassword = passwordEncoder.encode(newPassword);\n        updateMember.setPassword(newPassword);\n        updateMember = memberRepository.save(updateMember);\n\n        return updateMember;\n    }\n\n    public Iterable<Member> getMembersToDelete() {\n        return memberRepository.findMembersToDelete();\n    }\n\n    public Member getValidEntityById(Long idMember) {\n        return memberRepository.findByIdAndDeletionRequestAtIsNull(idMember)\n                .orElseThrow(() -> new MyEntityNotFoundException(\"Member with id = \" + idMember + \" not found, because does not exist or was deleted.\"));\n\n    }\n\n    public Member getValidAndCheckMemberById(Long idMember) {\n        return memberRepository.findValidAndCheckMemberById(idMember)\n                .orElseThrow(() -> new MyEntityNotFoundException(\"Member with id = \" + idMember + \" not found, because does not exist or was deleted or does not have identity check.\"));\n\n    }\n\n    @Transactional\n    @Override\n    public Member create(Member member) {\n\n        if (memberRepository.existsByActiveEmail(member.getActiveEmail())) {\n            throw new AttributeOfEntityTakenException(\"Member already exist with this email address.\");\n        }\n\n        member = super.create(member);\n        emailSinisAliasService.createDefault(member);\n\n        if (member.isIdentityCheck() && !hasMemberAllRequiredFieldsFilledOut(member)) {\n            throw new MemberCannotCheckIdentityException(\"Cannot check identity, some fields are not filled out.\");\n        }\n\n        languageService.createDefault(member);\n\n        return member;\n    }\n\n\n    @Override\n    public Member update(Member member) {\n\n        if (member.isIdentityCheck() && !hasMemberAllRequiredFieldsFilledOut(member)) {\n            throw new MemberCannotCheckIdentityException(\"Cannot check identity, some fields are not filled out.\");\n        }\n\n        return super.update(member);\n    }\n\n    private boolean hasMemberAllRequiredFieldsFilledOut(Member member) {\n\n        Iterable<Address> addressList = addressService.getByMemberId(member.getIdMember());\n        Iterable<RoomAccommodation> roomAccommodationList = roomAccommodationService.getByMemberId(member.getIdMember());\n\n        return addressList != null && addressList.iterator().hasNext() &&\n                roomAccommodationList != null && roomAccommodationList.iterator().hasNext();\n\n    }\n\n\n}\n\n"
    },
    {
        "filename": "data/member/domain/enums/RoleTypeEnum.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.domain.enums;\n\nimport lombok.Getter;\n\n@Getter\npublic enum RoleTypeEnum {\n\n    ROLE_MEMBER(\"ROLE_MEMBER\"),\n    ROLE_MULTI_MEDIA(\"ROLE_MULTI_MEDIA\"),\n    ROLE_CHAIR_MAN(\"ROLE_CHAIR_MAN\"),\n    ROLE_NET_ADMIN(\"ROLE_NET_ADMIN\"),\n    ROLE_GYM_ADMIN(\"ROLE_GYM_ADMIN\"),\n    ROLE_HEAD_OF_NET_ADMINS(\"ROLE_HEAD_OF_NE",
        "middle": "T_ADMINS\"),\n    ROLE_HEAD_OF_GYM_AD",
        "suffix": "MINS(\"ROLE_HEAD_OF_GYM_ADMINS\"),\n    ROLE_GOD_ADMIN(\"ROLE_GOD_ADMIN\"),\n    ROLE_ACCOUNTANT(\"ROLE_ACCOUNTANT\"),\n    ROLE_STUFF_ADMIN(\"ROLE_STUFF_ADMIN\"),\n    ROLE_REGISTRAR(\"ROLE_REGISTRAR\");\n\n    private final String value;\n\n    RoleTypeEnum(String value) {\n        this.value = value;\n    }\n}\n"
    },
    {
        "filename": "data/member/dto/ChangePasswordPatchDto.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.dto;\n\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Pattern;\nimport jakarta.validation.constraints.Positive;\nimport lombok.Data;\n\n@Data\npublic class ChangePasswordPatchDto {\n\n    @Schema(example = \"7227\")\n    @Positive(message = \"idMember must be a positive integer.\")\n    @NotNull(message = \"idMember cannot be blank.\")\n    private Long idMember;\n\n    @Schema(example = \"Aa123456\")\n    @Pattern(regexp = \"^(?=.*[\\\\d])(?=.*[a-z])(?=.*[A-Z])(?=\\\\S+$).{8,}$|^$\",\n            message = \"Password must contain at least one digit, one lowercase letter, one uppercase letter, and be at least 8 characters long, or it can be empty.\")\n    pr",
        "middle": "ivate String oldPassword;\n\n    @Schema(example = \"Aa1234567\")\n    @Pattern(regexp = \"^(?=.*[\\\\d])(?=.*[a-z])(?=.*[A-Z])(?=\\\\S+",
        "suffix": "$).{8,}$\",\n            message = \"Password must contain at least one digit, one lowercase letter, one uppercase letter, and be at least 8 characters long.\")\n    @NotBlank(message = \"New password cannot be blank.\")\n    private String newPassword;\n}\n"
    },
    {
        "filename": "data/member/business/RoomAccommodationService.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.business;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.AbstractMemberService;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.exception.EntityAlreadyAssignedException;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.repository.MemberRecordJpaRepository;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Ro",
        "middle": "omAccommodation;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.repository.RoomAccommodationRepository;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class RoomAccommodation",
        "suffix": "Service extends AbstractMemberService<RoomAccommodation> {\n\n    private final RoomAccommodationRepository roomAccommodationRepository;\n\n    public RoomAccommodationService(RoomAccommodationRepository roomAccommodationRepository) {\n        this.roomAccommodationRepository = roomAccommodationRepository;\n    }\n\n    @Override\n    protected MemberRecordJpaRepository<RoomAccommodation, Long> getRepository() {\n        return this.roomAccommodationRepository;\n    }\n\n    @Override\n    public RoomAccommodation create(RoomAccommodation roomAccommodation) {\n\n        if (roomAccommodationRepository.existsByMemberIdAndDeletedAtIsNull(roomAccommodation.getMember().getIdMember())) {\n            throw new EntityAlreadyAssignedException(\"Member with id = \" + roomAccommodation.getMember().getIdMember() + \" already has room.\");\n        }\n\n        return super.create(roomAccommodation);\n    }\n}\n"
    },
    {
        "filename": "data/member/business/LanguageService.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.business;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.AbstractMemberService;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.repository.MemberRecordJpaRepository;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Language;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.",
        "middle": "domain.Member;\nimport cz.cvu",
        "suffix": "t.fit.kvasvojt.sinis.modules.member.repository.LanguageRepository;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class LanguageService extends AbstractMemberService<Language> {\n    private final LanguageRepository languageRepository;\n\n    @Autowired\n    public LanguageService(LanguageRepository languageRepository) {\n        this.languageRepository = languageRepository;\n    }\n\n    @Override\n    protected MemberRecordJpaRepository<Language, Long> getRepository() {\n        return this.languageRepository;\n    }\n\n    public Language createDefault(Member member) {\n\n\n        Language language = new Language();\n        language.setMember(member);\n        language.setCreatedComment(\"Default created by system.\");\n        return create(language);\n    }\n}\n"
    },
    {
        "filename": "data/member/business/AssociateFacultyService.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.business;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.AbstractMemberService;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.repository.MemberRecordJpaRepository;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.AssociateFaculty;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.repository.AssociateFacultyRepository;\nimport org.springframework.beans.factory.annotation.Autowired",
        "middle": ";\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class AssociateFacultyService extends AbstractMemberService<AssociateFaculty> {\n    private fi",
        "suffix": "nal AssociateFacultyRepository associateFacultyRepository;\n\n    @Autowired\n    public AssociateFacultyService(AssociateFacultyRepository associateFacultyRepository) {\n        this.associateFacultyRepository = associateFacultyRepository;\n    }\n\n    @Override\n    protected MemberRecordJpaRepository<AssociateFaculty, Long> getRepository() {\n        return this.associateFacultyRepository;\n    }\n}\n"
    },
    {
        "filename": "data/member/dto/AddressCreateDto.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.dto;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.dto.MemberCreateDto;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport jakarta.validation.constraints.NotBlank;\nimport jakarta.validation.constraints.Positive;\nimport jakarta.validation.constraints.Size;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\n@EqualsAndHashCode(callSuper = true)\n@Data\npublic class AddressCreateDto extends MemberCre",
        "middle": "ateDto {\n\n    @Schema(example = \"CZE\")\n    @Size(max = 3, message = \"CountryShort must be at most 3 characters long\")\n    @NotBlank(message = \"Country cannot be blank.\")\n    ",
        "suffix": "@Size(max = 256, message = \"'${validatedValue}' cannot exceed {max} characters.\")\n    private String countryShort;\n\n    @Schema(example = \"Kol\u00edn\")\n    @NotBlank(message = \"City cannot be blank.\")\n    @Size(max = 256, message = \"'${validatedValue}' cannot exceed {max} characters.\")\n    private String city;\n\n    @Schema(example = \"Pra\u017esk\u00e1\")\n    @NotBlank(message = \"Street cannot be blank.\")\n    @Size(max = 256, message = \"'${validatedValue}' cannot exceed {max} characters.\")\n    private String street;\n\n    @Schema(example = \"10\")\n    @Positive(message = \"Street number must be a positive integer.\")\n    private int streetNumber;\n\n}\n"
    },
    {
        "filename": "data/member/business/AddressService.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.business;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.AbstractMemberService;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.repository.MemberRecordJpaRepository;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Address;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.repository.AddressRepository;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class AddressService extends AbstractMemberService<Address> {\n    private f",
        "middle": "inal AddressRepository addressRepository;\n\n    public AddressService(AddressRepository addressRepository) {\n        this.addressRepository = addressRepo",
        "suffix": "sitory;\n    }\n\n    @Override\n    protected MemberRecordJpaRepository<Address, Long> getRepository() {\n        return this.addressRepository;\n    }\n}\n"
    },
    {
        "filename": "data/member/dto/AddressResponseDto.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.dto;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.dto.RecordableDeleteEntityAndMemberResponseDto;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\n@EqualsAndHashCode(callSuper = true)\n@Data\npublic class ",
        "middle": "AddressResponseDto extends RecordableDeleteEntityAndMemberResponseDto {\n\n    @Schema(example = \"95",
        "suffix": "3\")\n    private Long idAddress;\n    private CountryDto country;\n    private MemberResponseDto member;\n\n    @Schema(example = \"Kol\u00edn\")\n    private String city;\n\n    @Schema(example = \"Pra\u017esk\u00e1\")\n    private String street;\n\n    @Schema(example = \"10\")\n    private int streetNumber;\n}\n"
    },
    {
        "filename": "data/member/dto/AuthResponseDto.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.dto;\n\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport lombok.Data;\n\n@Data\npublic class AuthResponseDto {\n\n    @Schema(example = \"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJzeXNAc3lzLnN5cyIsImlhdCI6MTcxMzU1MDg5NSwiZXhwIjoxNzEzNTUyNjk1fQ.A4iHlPx00Sa1DThh6j-ndEQA1U0e1OOJ01X0OpDbEdLpOlkPjnLzWuryv7V7-nt",
        "middle": "lGsscMikchzRF8PPqOHzSYA\")\n    private String accessToken;\n\n    @Schema(example = \"Bearer \")\n    private String tokenType = \"Bearer \";\n\n    public AuthRe",
        "suffix": "sponseDto(String accessToken) {\n        this.accessToken = accessToken;\n    }\n\n}\n"
    },
    {
        "filename": "data/member/dto/UniversityResponseDto.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.dto;\n\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport jakarta.validation.constraints.NotBlank;\nimport lombok.Data;\n\n@Data\npublic class UniversityResponseDto {\n\n    @Schema(example = \"66\")\n    private Long idUniversity;\n\n    @Schema(example = \"CVUT {{$ran",
        "middle": "domCity}}\")\n    @NotBlank(message = \"name cannot be blank\")\n    private String name;\n\n    @Schema(example = \"CVUT {{$randomCity}}\")\n   ",
        "suffix": " @NotBlank(message = \"nameEn cannot be blank\")\n    private String nameEn;\n\n}\n"
    },
    {
        "filename": "data/member/repository/FacultyRepository.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.repository;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.repository.IdJpaRepository;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Faculty;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.University;\nimport org.springframework.stereotype.Repository;\n\n@Repos",
        "middle": "itory\npublic interface FacultyRepository extends IdJpaRepository<Faculty, Long> {\n    boolean existsByNameEnAndUniversity(String nameEN, Univ",
        "suffix": "ersity university);\n\n    boolean existsByNameAndUniversity(String name, University university);\n}\n"
    },
    {
        "filename": "data/member/dto/MemberUpdateDto.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.dto;\n\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport jakarta.validation.constraints.*;\nimport lombok.Data;\n\n@Data\npublic class MemberUpdateDto {\n\n    @Schema(example = \"Naftenko\")\n    @NotBlank(message = \"First name cannot be blank\")\n    private String firstName",
        "middle": ";\n\n    @Schema(example = \"Petrolijevic\")\n    @NotBlank(message = \"Middle name cannot be blank\")\n    private String middleName;\n\n    @Schema(example = \"Benzinov\")\n    @NotBlan",
        "suffix": "k(message = \"Last name cannot be blank\")\n    private String lastName;\n\n    @Schema(example = \"false\")\n    @NotNull(message = \"Identity check cannot be blank\")\n    private boolean identityCheck;\n\n    @Schema(example = \"Aa123456\")\n    @Pattern(regexp = \"^(?=.*[\\\\d])(?=.*[a-z])(?=.*[A-Z])(?=\\\\S+$).{8,}$|^$\",\n            message = \"Password must contain at least one digit, one lowercase letter, one uppercase letter, and be at least 8 characters long, or it can be empty.\")\n    private String password;\n\n    @Schema(example = \"{{$randomEmail}}\")\n    @NotBlank(message = \"Active email cannot be blank\")\n    @Email(message = \"Invalid email\")\n    private String activeEmail;\n\n    @Schema(example = \"Did not find country\")\n    @NotBlank(message = \"Note cannot be blank\")\n    private String note;\n\n    @Schema(example = \"CZE\")\n    @Size(max = 3, message = \"CountryShort must be at most 3 characters long\")\n    @NotBlank(message = \"Country cannot be blank.\")\n    private String countryShort;\n\n    @Schema(example = \"Praha\")\n    @NotBlank(message = \"Birth city cannot be blank.\")\n    private String birthCity;\n}\n"
    },
    {
        "filename": "data/member/dto/RoomAccommodationResponseDto.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.dto;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.dto.RecordableDeleteEntityResponseDto;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\n@EqualsAndHashCode(callSuper = true)\n@Data\npublic cl",
        "middle": "ass RoomAccommodationResponseDto extends RecordableDeleteEntityResponseDto {\n\n    @Schema(example = \"88\")\n    private Long idRoomAccommodation;\n    private MemberResponseDto ",
        "suffix": "member;\n    private RoomResponseDto room;\n\n}\n"
    },
    {
        "filename": "data/member/dto/LanguageResponseDto.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.dto;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.dto.RecordableDeleteEntityAndMemberResponseDto;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.enums.PreferredLangEnum;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport jakarta.validation.constraints.NotNull;\nimport jakarta.validation.constraints.Positive;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\n\n@EqualsAndHashCode(callSuper = true)\n@Data\npublic class LanguageResponseDto extends RecordableDeleteEntityAndMemberResponseDto {\n\n    @Sch",
        "middle": "ema(example = \"1\")\n    @Positive(message = \"idLanguage must be a positive integer.\")\n    @NotNull(message = \"idLanguage cannot be blank.\")\n    private Long idLanguage;\n\n\n    @Schema(example = ",
        "suffix": "\"CZ\")\n    private PreferredLangEnum preferredLanguage;\n}\n"
    },
    {
        "filename": "data/member/repository/CountryRepository.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.repository;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.repository.IdJpaRepository;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Country;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.Optional;\n\n@Repository\npublic interface",
        "middle": " CountryRepository extends IdJpaRepository<Country, Long> {\n\n    Optional<Country> findByCountryShort(String shortName);\n\n    @Query(\"SELECT c FROM Country c ORDER BY  c.priority DESC, c.countrySh",
        "suffix": "ort, c.countryLong\")\n    Iterable<Country> findAllSorted();\n\n    boolean existsByCountryShort(String countryShort);\n\n    boolean existsByCountryLong(String countryLong);\n}\n"
    },
    {
        "filename": "data/member/controller/BlockAccessController.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.controller;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.AbstractMemberService;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.controller.AbstractMemberController;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.dto.RecordableDeleteEntityCreateDto;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.business.BlockAccessService;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.business.MemberService;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.BlockAccess;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Member;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.dto.BlockAccessCreateDto;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.dto.BlockAccessResponseDto;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.media.Content;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport io.swagger.v3.oas.annotations.responses.ApiResponse;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport org.modelmapper.ModelMapper;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.domain.Sort;\nimport org.springframework.data.web.PageableDefault;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.access.prepost.PreAuthorize;\nimport org.springframework.security.core.annotation.AuthenticationPrincipal;\nimport org.springframework.validation.annotation.Validated;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.Map;\n\n@Tag(name = \"Member\")\n@RestController\npublic class BlockAccessController extends AbstractMemberController<BlockAccess, BlockAccessResponseDto, BlockAccessCreateDto> {\n\n    private final BlockAccessService blockAccessService;\n\n\n    BlockAccessController(ModelMapper modelMapper, BlockAccessService blockAccessService, MemberService memberService) {\n        super(modelMapper, memberService);\n        this.blockAccessService = blockAccessService;\n\n    }\n\n    @Operation(\n            summary = \"Get all block accesses related to member\",\n            description = \"This endpoint return block accesses related to member. Endpoint can filter out deleted block accesses.\"\n    )\n    @Override\n    @ResponseStatus(HttpStatus.OK)\n    @GetMapping(\"/members/{idMember}/block-accesses\")\n    @PreAuthorize(\"@memberAuthorization.canSeeAllMembersAndTheirMembershipsOrIsOwner(authentication, #idMember)\")\n    public ResponseEntity<Page<BlockAccessResponseDto>> getAllByMemberId(\n            @PathVariable Long idMember,\n            @RequestParam(required = false, defaultValue = \"true\") boolean isNotDeleted,\n            @RequestParam(required = false) Map<String, String> filterParams,\n\n            @PageableDefault(page = 0, size = 20, sort = \"createdAt\", direction = Sort.Direction.DESC)\n            Pageable pageable\n    ) {\n        return super.getAllByMemberId(idMember, isNotDeleted, filterParams, pageable);\n    }\n\n    @Operation(\n   ",
        "middle": "         summary = \"Create b",
        "suffix": "lock access\",\n            description = \"Create block access and link it to member.\"\n    )\n    @ApiResponse(responseCode = \"404\", content = @Content(schema = @Schema(example = \"{\\\"message\\\": \\\"Entity with id = 1 not found.\\\"}\")))\n    @ResponseStatus(HttpStatus.CREATED)\n    @PostMapping(\"/block-accesses\")\n    @PreAuthorize(\"@memberAuthorization.canBlockAccess(#loginMember, #blockAccessCreateDto)\")\n    public ResponseEntity<BlockAccessResponseDto> create(\n            @Validated @RequestBody BlockAccessCreateDto blockAccessCreateDto,\n            @AuthenticationPrincipal Member loginMember\n    ) {\n\n        BlockAccess newBlockAccess = convertToEntity(blockAccessCreateDto, loginMember);\n\n        newBlockAccess = this.blockAccessService.create(newBlockAccess);\n\n        return new ResponseEntity<>(convertToDto(newBlockAccess), HttpStatus.CREATED);\n    }\n\n    @Operation(\n            summary = \"Delete block access\",\n            description = \"This endpoint will soft delete block access. In another words it will fill attributes related to deletion.\"\n    )\n    @Override\n    @ResponseStatus(HttpStatus.OK)\n    @PatchMapping(\"/block-accesses/{idBlockAccess}\")\n    @PreAuthorize(\"@memberAuthorization.isRegistrarOrOwner(authentication, @blockAccessService.getEntityById(#idBlockAccess).getMember().getIdMember() )\")\n    public ResponseEntity<BlockAccessResponseDto> deletion(@Validated @RequestBody RecordableDeleteEntityCreateDto recordableDeleteEntityCreateDto,\n                                                           @Parameter(description = \"The id of the block membership to delete\", example = \"{{idBlockAccess}}\", required = true) @PathVariable Long idBlockAccess,\n                                                           @AuthenticationPrincipal Member loginMember) {\n        return super.deletion(recordableDeleteEntityCreateDto, idBlockAccess, loginMember);\n    }\n\n    @Override\n    protected AbstractMemberService<BlockAccess> getService() {\n        return blockAccessService;\n    }\n\n    @Override\n    protected Class<BlockAccess> getEntityClass() {\n        return BlockAccess.class;\n    }\n\n    @Override\n    protected Class<BlockAccessResponseDto> getDtoClass() {\n        return BlockAccessResponseDto.class;\n    }\n}\n"
    },
    {
        "filename": "data/member/controller/FacultyController.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.controller;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.controller.AbstractModelMapperController;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.business.FacultyService;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.business.UniversityService;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Faculty;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.University;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.dto.FacultyCreateDto;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.dto.FacultyResponseDto;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.media.Content;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport io.swagger.v3.oas.annotations.responses.ApiResponse;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport org.modelmapper.ModelMapper;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.access.prepost.PreAuthorize;\nimport org.springframework.validation.annotation.Validated;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.Collection;\n\n@Tag(name = \"Member\")\n@RestController\npublic class FacultyController extends AbstractModelMapperController<Faculty, FacultyResponseDto, FacultyCreateDto> {\n\n    private final FacultyService facultyService;\n    private final UniversityService universityService;\n\n    FacultyController(FacultyService facultyService, UniversityS",
        "middle": "ervice universityService, ModelMapper modelMapper) {\n        super(modelMapper);\n        this.facultyService = ",
        "suffix": "facultyService;\n        this.universityService = universityService;\n    }\n\n    @Operation(\n            summary = \"Get all faculties\",\n            description = \"Get all faculties.\"\n    )\n    @ResponseStatus(HttpStatus.OK)\n    @GetMapping(\"/faculties\")\n    public Collection<FacultyResponseDto> getAll() {\n        return convertManyToDTO(facultyService.getAll());\n    }\n\n    @Operation(\n            summary = \"Create faculty\",\n            description = \"Create faculty link to university\"\n    )\n    @ApiResponse(responseCode = \"409\", description = \"Entity already deleted\",\n            content = @Content(mediaType = \"application/json\", schema = @Schema(example = \"{\\\"message\\\": \\\"FacultyEn already exist on this university.\\\"}\")))\n    @ApiResponse(responseCode = \"404\", content = @Content(schema = @Schema(example = \"{\\\"message\\\": \\\"Entity with id = 1 not found.\\\"}\")))\n    @ResponseStatus(HttpStatus.CREATED)\n    @PostMapping(\"/faculties\")\n    @PreAuthorize(\"@memberAuthorization.isRegistrar(authentication)\")\n    public ResponseEntity<FacultyResponseDto> create(@Validated @RequestBody FacultyCreateDto newFaculty) {\n\n        Faculty newEntityFaculty = this.facultyService.create(convertToEntity(newFaculty));\n\n        return new ResponseEntity<>(convertToDto(newEntityFaculty), HttpStatus.CREATED);\n    }\n\n    @Override\n    protected Faculty convertToEntity(FacultyCreateDto facultyCreateDto) {\n\n        University university = this.universityService.getEntityById(facultyCreateDto.getIdUniversity());\n\n        Faculty faculty = super.convertToEntity(facultyCreateDto);\n        faculty.setUniversity(university);\n        return faculty;\n    }\n\n    @Override\n    protected Class<Faculty> getEntityClass() {\n        return Faculty.class;\n    }\n\n    @Override\n    protected Class<FacultyResponseDto> getDtoClass() {\n        return FacultyResponseDto.class;\n    }\n}\n"
    },
    {
        "filename": "data/member/business/FacultyService.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.business;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.AbstractService;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.exception.AttributeOfEntityTakenException;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.repository.IdJpaRepository;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Faculty;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.repository.FacultyRepositor",
        "middle": "y;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class FacultyService extends AbstractService<Facu",
        "suffix": "lty> {\n    private final FacultyRepository facultyRepository;\n\n    public FacultyService(FacultyRepository facultyRepository) {\n        this.facultyRepository = facultyRepository;\n    }\n\n    @Override\n    protected IdJpaRepository<Faculty, Long> getRepository() {\n        return this.facultyRepository;\n    }\n\n    @Override\n    public Faculty create(Faculty faculty) {\n\n        if (facultyRepository.existsByNameEnAndUniversity(faculty.getNameEn(), faculty.getUniversity())) {\n            throw new AttributeOfEntityTakenException(\"NameEn already exist on university.\");\n        }\n\n        if (facultyRepository.existsByNameAndUniversity(faculty.getName(), faculty.getUniversity())) {\n            throw new AttributeOfEntityTakenException(\"Name already exist on university.\");\n        }\n\n        return super.create(faculty);\n    }\n}\n"
    },
    {
        "filename": "data/member/business/BlockAccessService.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.business;\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.business.AbstractMemberService;\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.repository.MemberRecordJpaRepository;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.BlockAccess;\ni",
        "middle": "mport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.Member;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.repository.BlockAccessRepository;\nimport org.springframework.stereotype.",
        "suffix": "Service;\n\n@Service\npublic class BlockAccessService extends AbstractMemberService<BlockAccess> {\n    private final BlockAccessRepository blockAccessRepository;\n\n    public BlockAccessService(BlockAccessRepository blockAccessRepository) {\n        this.blockAccessRepository = blockAccessRepository;\n    }\n\n    @Override\n    protected MemberRecordJpaRepository<BlockAccess, Long> getRepository() {\n        return this.blockAccessRepository;\n    }\n\n    public boolean isBlockByMembership(Member e) {\n        return blockAccessRepository.isBlock(e);\n    }\n}\n"
    },
    {
        "filename": "data/member/dto/RoleAssignmentCreateDto.java",
        "prefix": "package cz.cvut.fit.kvasvojt.sinis.modules.member.dto;\n\n\nimport cz.cvut.fit.kvasvojt.sinis.abstract_classes.dto.MemberCreateDto;\nimport cz.cvut.fit.kvasvojt.sinis.modules.member.domain.enums.RoleTypeEnum;\nimport io.swagger.v3.oas.annotations.media.Schema;\nimport jakarta.validation.constraints.NotNull;\nimport lombok.Data;\nimport lom",
        "middle": "bok.EqualsAndHashCode;\n\n@EqualsAndHashCode(callSuper = true)\n@Data\npublic class RoleAssignmentCreateDto extends MemberCreateDto ",
        "suffix": "{\n\n    @Schema(example = \"ROLE_NET_ADMIN\")\n    @NotNull(message = \"Role cannot be blank\")\n    private RoleTypeEnum role;\n}\n"
    }
]